---
export type CalloutType = 'check' | 'error' | 'note' | 'warning' | 'tip' | 'info'
interface Props {
    title?: string
    type?: CalloutType
}

const ICON_MAP: Record<CalloutType, string> = {
    'check': '‚úì',
    'error': '‚úï',
    'note': 'üìù',
    'warning': '‚ö†',
    'tip': 'üí°',
    'info': '‚Ñπ'
}

const COLOR_MAP: Record<CalloutType, string> = {
    'check': 'text-green-700 dark:text-green-400',
    'error': 'text-red-700 dark:text-red-400',
    'note': 'text-gray-700 dark:text-gray-300',
    'warning': 'text-orange-700 dark:text-orange-400',
    'tip': 'text-amber-700 dark:text-amber-300',
    'info': 'text-blue-700 dark:text-blue-400'
}

const BG_MAP: Record<CalloutType, string> = {
    'check': 'bg-green-50 dark:bg-green-950/30 border-l-green-500',
    'error': 'bg-red-50 dark:bg-red-950/30 border-l-red-500',
    'note': 'bg-gray-50 dark:bg-gray-800/30 border-l-gray-400',
    'warning': 'bg-orange-50 dark:bg-orange-950/30 border-l-orange-500',
    'tip': 'bg-amber-50 dark:bg-amber-950/30 border-l-amber-500',
    'info': 'bg-blue-50 dark:bg-blue-950/30 border-l-blue-500'
}

const { title, type = 'info' } = Astro.props
---
<div class={`callout flex gap-3 w-full px-4 py-3 my-6 rounded-md border-l-4 ${BG_MAP[type]}`}>
    <div class={`icon-wrapper flex-shrink-0 w-5 h-5 mt-0.5 flex items-center justify-center rounded-full ${COLOR_MAP[type]}`}>
        <span class="text-sm font-bold" title={type}>{ICON_MAP[type]}</span>
    </div>
    <div class="copy flex flex-col gap-1 flex-1">
        {title && <h4 class={`title m-0 text-sm font-semibold ${COLOR_MAP[type]}`}>{title}</h4>}
        <div class="callout-content text-sm">
            <slot/>
        </div>
    </div>
</div>

<style>
    .callout {
        transition: all 0.2s ease;
        font-family: inherit;
    }
    
    .callout-content :global(p:first-child) {
        margin-top: 0;
    }
    
    .callout-content :global(p:last-child) {
        margin-bottom: 0;
    }
    
    .callout-content :global(p) {
        line-height: 1.6;
    }
    
    .icon-wrapper {
        background-color: currentColor;
        opacity: 0.15;
    }
    
    .icon-wrapper span {
        opacity: 6;
        mix-blend-mode: multiply;
    }
    
    .dark .icon-wrapper span {
        mix-blend-mode: screen;
    }
</style>
