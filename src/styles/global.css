@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap');

@tailwind base;
@layer base {
	html {
		@apply bg-amber-50 text-stone-900;
		background-image: 
			repeating-linear-gradient(
				0deg,
				rgba(139, 69, 19, 0.03),
				rgba(139, 69, 19, 0.03) 1px,
				transparent 1px,
				transparent 2px
			);
		&.dark {
			background-color: #242628 !important;
			color: #b1b4b9 !important;
			background-image: 
				repeating-linear-gradient(
					0deg,
					rgba(177, 180, 185, 0.03),
					rgba(177, 180, 185, 0.03) 1px,
					transparent 1px,
					transparent 2px
				);
            header, footer {
                color: #b1b4b9 !important;
                border-color: rgba(64, 66, 71, 0.5) !important;
            }
			strong {
				color: #dfbe81 !important;
			}
		}
	}
	body {
		@apply min-h-screen;
		font-family: 'Inter', system-ui, -apple-system, sans-serif;
	}
	
	.dark body {
		background-color: #242628 !important;
	}
	
	/* Prevent horizontal overflow on all elements */
	* {
		@apply max-w-full;
	}
	
	/* Exception for specific layout elements that need full width */
	html, body, .fixed, .absolute {
		max-width: none !important;
	}
	
	/* ASCII terminal cursor effect */
	@keyframes blink {
		0%, 49% { opacity: 1; }
		50%, 100% { opacity: 0; }
	}
	
	/* Retro CRT screen effect */
	@keyframes flicker {
		0% { opacity: 0.97; }
		5% { opacity: 0.94; }
		10% { opacity: 0.99; }
		15% { opacity: 0.94; }
		20% { opacity: 1; }
		80% { opacity: 0.99; }
		90% { opacity: 0.94; }
		100% { opacity: 0.98; }
	}
	
	/* Pixel art hover effect */
	.pixel-hover {
		transition: transform 0.1s steps(2);
	}
	.pixel-hover:hover {
		transform: translateY(-2px);
	}
}
@tailwind components;
@tailwind utilities;

/* Additional global styles */
@layer components {
	.gradient-bg {
		@apply bg-gradient-to-br from-amber-50 via-orange-50 to-amber-50 dark:from-stone-950 dark:via-stone-900 dark:to-stone-950;
	}
	
	.card {
		@apply bg-amber-50/90 dark:bg-stone-900/90 border-2 border-stone-800 dark:border-emerald-800/50 p-6;
		box-shadow: 4px 4px 0 rgba(120, 53, 15, 0.3);
		position: relative;
	}
	.dark .card {
		box-shadow: 4px 4px 0 rgba(16, 185, 129, 0.2);
	}
	.card::before {
		content: '╔═════════╗';
		@apply absolute -top-3 left-2 text-xs text-stone-600 dark:text-emerald-700 font-mono;
	}
	.card::after {
		content: '╚═════════╝';
		@apply absolute -bottom-3 left-2 text-xs text-stone-600 dark:text-emerald-700 font-mono;
	}
	
	.btn-primary {
		@apply inline-flex items-center px-4 py-2 text-sm font-bold text-amber-50 bg-gradient-to-b from-orange-600 to-red-700 border-2 border-stone-900 dark:from-emerald-600 dark:to-teal-700 dark:border-emerald-400;
		font-family: 'Inter', system-ui, -apple-system, sans-serif;
		box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.5);
		text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.5);
	}
	.btn-primary:hover {
		transform: translate(-1px, -1px);
		box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.5);
	}
	.btn-primary:active {
		transform: translate(1px, 1px);
		box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
	}
	
	.btn-secondary {
		@apply inline-flex items-center px-4 py-2 text-sm font-bold text-stone-800 bg-amber-200 border-2 border-stone-800 dark:text-emerald-300 dark:bg-stone-800 dark:border-emerald-600;
		font-family: 'IBM Plex Mono', monospace;
		box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.3);
	}
	.btn-secondary:hover {
		transform: translate(-1px, -1px);
		box-shadow: 3px 3px 0 rgba(0, 0, 0, 0.3);
	}
	
	/* Text effects */
	.bbs-text {
		font-family: 'Inter', system-ui, -apple-system, sans-serif;
		@apply text-xl tracking-wide;
	}
	
	.pixel-text {
		font-family: 'Inter', system-ui, -apple-system, sans-serif;
		@apply text-sm;
	}
	
	/* ASCII box drawing */
	.ascii-box {
		@apply font-mono text-stone-600 dark:text-emerald-600;
	}
}

/* Force image sizing in prose content */
.prose img,
article img,
.prose-content img {
	max-width: 100% !important;
	max-height: 600px !important;
	width: auto !important;
	height: auto !important;
	object-fit: contain !important;
	display: block !important;
	margin: 1.5rem auto !important;
	border-radius: 0.5rem !important;
	border: 1px solid rgb(229 231 235) !important;
	box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05) !important;
}

@media (min-width: 768px) {
	.prose img,
	article img,
	.prose-content img {
		max-width: 800px !important;
	}
}

.dark .prose img,
.dark article img,
.dark .prose-content img {
	border-color: rgb(55 65 81) !important;
}

/* Modern header styles */
.ink-h {
    @apply inline-block text-sm font-medium tracking-wide text-gray-600 dark:text-gray-400 py-2
}

::-webkit-scrollbar {
	@apply w-2;
}

::-webkit-scrollbar-track {
	@apply bg-gray-100 dark:bg-gray-800;
}

::-webkit-scrollbar-thumb {
	@apply bg-gray-300 dark:bg-gray-600 rounded-full;
}

/** Code block **/
.astro-code {
	@apply relative border border-gray-200 dark:border-gray-700 rounded-lg mt-0;
	overflow-x: auto;
	overflow-y: hidden;
	scrollbar-width: thin;
}

/* Hide scrollbar when not needed */
.astro-code:has(pre code:not(:hover)) {
	overflow-x: hidden;
}

/* Show scrollbar on hover if content overflows */
.astro-code:hover {
	overflow-x: auto;
}

/* Ensure code blocks don't create unnecessary scrollbars */
.astro-code pre {
	overflow: visible;
	margin: 0;
	width: fit-content;
	min-width: 100%;
}

.astro-code code {
	@apply text-sm;
	display: inline-block;
	min-width: 100%;
}

/* Fix for expressive-code plugin */
.expressive-code {
	overflow-x: hidden !important;
}

.expressive-code:hover {
	overflow-x: auto !important;
}

.expressive-code pre {
	overflow-x: visible !important;
	overflow-y: hidden !important;
	margin: 0 !important;
}

@media (max-width: 767px) {
	.astro-code code {
		@apply text-xs;
	}
}

/* Mobile-friendly table styles */
.prose table {
	@apply border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm;
	border-collapse: collapse;
	border-spacing: 0;
	table-layout: auto;
	width: 100%;
	display: block;
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
}

@media (max-width: 767px) {
	.prose table {
		@apply text-sm;
		min-width: fit-content;
	}
	
	.prose table th,
	.prose table td {
		@apply px-2 py-1;
		white-space: nowrap;
	}
	
	/* Ensure the table container is scrollable on mobile */
	.prose {
		overflow-x: visible;
	}
	
	/* Add visual indicator for scrollable tables */
	.prose table {
		box-shadow: 
			0 1px 2px 0 rgb(0 0 0 / 0.05),
			inset -10px 0 10px -10px rgba(0,0,0,0.1);
	}
}

/* Ensure long words break properly */
.prose {
	@apply break-words;
}

/* Enhanced table aesthetics (light + dark) */
.prose table thead th {
	@apply bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-emerald-100 font-semibold;
	@apply border-b border-gray-200 dark:border-gray-700;
}

.prose table th,
.prose table td {
	@apply align-top px-3 py-2 text-sm;
}

/* Smooth color transitions on hover/focus */
.prose table th,
.prose table td,
.prose table tbody tr {
	@apply transition-colors duration-200;
}

/* Zebra banded rows */
.prose table tbody tr:nth-child(odd) {
	@apply bg-white dark:bg-stone-900;
}
.prose table tbody tr:nth-child(even) {
	@apply bg-amber-50/60 dark:bg-stone-800/60;
}

/* Row hover highlight */
.prose table tbody tr:hover {
	@apply bg-amber-100/60 dark:bg-stone-700/60 transition-colors;
}


/* Borders between rows and columns for readability */
.prose table tbody td {
	@apply border-t border-gray-100 dark:border-stone-800;
}

/* Style the first column */
.prose table tbody td:first-child,
.prose table thead th:first-child {
	@apply font-medium;
}

/* Make header stick on overflow (optional nicety) */
/* Remove sticky header to avoid width mismatch artifacts */
.prose table thead th { position: static; }

/* Improve caption styling when present */
.prose table caption {
	@apply caption-bottom mt-2 text-sm text-gray-600 dark:text-gray-400;
}

/* Ensure compact cell padding on mobile after enhancements above */
@media (max-width: 767px) {
	.prose table th,
	.prose table td {
		@apply px-2 py-1;
	}
}
.remark-code-title {
	@apply inline-block relative top-3 px-3 py-1 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 rounded-t-md border border-b-0 border-gray-200 dark:border-gray-700;
}

/** Shiki theme - Light/Dark mode **/

:root {
	--astro-code-color-text: #24292f;
	--astro-code-color-background: #f8f9fa;
	--astro-code-token-constant: #0550ae;
	--astro-code-token-string: #24292f;
	--astro-code-token-comment: #6e7781;
	--astro-code-token-keyword: #cf222e;
	--astro-code-token-parameter: #24292f;
	--astro-code-token-function: #8250df;
	--astro-code-token-string-expression: #0a3069;
	--astro-code-token-punctuation: #24292f;
	--astro-code-token-link: #000012;
}

html.dark {
	--astro-code-color-text: #c9d1d9;
	--astro-code-color-background: #161b22;
	--astro-code-token-constant: #79c0ff;
	--astro-code-token-string: #a5d6ff;
	--astro-code-token-comment: #8b949e;
	--astro-code-token-keyword: #ff7b72;
	--astro-code-token-parameter: #c9d1d9;
	--astro-code-token-function: #d2a8ff;
	--astro-code-token-string-expression: #a5d6ff;
	--astro-code-token-punctuation: #c9d1d9;
	--astro-code-token-link: #000012;
}

/* Mermaid dark-mode readability fixes */
.dark .prose svg .messageText,
.dark .prose svg .noteText,
.dark .prose svg .loopText,
.dark .prose svg .titleText,
.dark .prose svg .actor,
.dark .prose svg text,
.dark .prose svg tspan {
  fill: #e5e7eb !important; /* gray-200 */
  color: #e5e7eb !important;
}

.dark .prose svg .note,
.dark .prose svg .label,
.dark .prose svg .messageLine0,
.dark .prose svg .messageLine1,
.dark .prose svg .loopLine {
  stroke: #9ca3af !important; /* gray-400 */
}

/* On light-filled shapes (notes/actor boxes), use dark text for contrast */
.dark .prose svg .noteText,
.dark .prose svg .noteText tspan,
.dark .prose svg .actor.actor-box,
.dark .prose svg .actor.actor-box tspan {
  fill: #111827 !important; /* gray-900 */
  color: #111827 !important;
}
