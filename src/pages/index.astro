---
export const prerender = true

import { getCollection, getEntryBySlug } from 'astro:content'
import DefaultPageLayout from '$/layouts/default.astro'
import PostPreviewList from '$/components/PostPreviewList.astro'
import Prose from '$/components/Prose.astro'
import { Content as AboutAstroInk } from './_astro-ink.md'


const title = 'Home'
const description = 'Data engineering, developer tools, and programming insights'

const posts = await getCollection('blog')
---
<DefaultPageLayout content={{ title, description }} showPageHeader={false}>
    <div class="hero">
        <div class="hero__content">
            <Prose>
                <AboutAstroInk/>
            </Prose>
        </div>
    </div>
    <div class="divider"></div>
    <PostPreviewList posts={posts.slice(0, 3)} heading="recent posts"/>
    <div class="page__actions">
        <a class="action__go-to-blog ink-h" href="/blog" title="All Posts">All Posts &rarr;</a>
    </div>
</DefaultPageLayout>

<style>
    .hero {
        @apply py-8 mb-12
    }
    .hero__content {
        @apply max-w-3xl mx-auto
    }
    .divider {
        @apply w-full h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-700 to-transparent mb-12
    }
    .page__actions {
        @apply flex justify-center py-8
    }
    .action__go-to-blog {
        @apply inline-flex items-center gap-2 px-6 py-3 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 rounded-lg transition-colors shadow-sm
    }
    .action__go-to-blog:hover {
        @apply shadow-md transform -translate-y-0.5
    }
    
    /* Style the prose content */
    :global(.hero .prose h1) {
        @apply text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4 !important;
        color: rgb(17 24 39) !important;
    }
    :global(.dark .hero .prose h1) {
        color: rgb(255 255 255) !important;
    }
    :global(.hero .prose p) {
        @apply text-base md:text-lg text-gray-600 dark:text-gray-400 leading-relaxed mb-0
    }
    :global(.hero .prose a) {
        @apply text-blue-600 dark:text-blue-400 hover:underline font-medium
    }
</style>
