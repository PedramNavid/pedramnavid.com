---
export const prerender = true

import { getCollection, getEntryBySlug } from 'astro:content'
import DefaultPageLayout from '$/layouts/default.astro'
import PostPreviewList from '$/components/PostPreviewList.astro'
import Prose from '$/components/Prose.astro'
import { Content as AboutAstroInk } from './_astro-ink.md'


const title = 'Home'
const description = 'Data engineering, developer tools, and programming insights'

const allPosts = await getCollection('blog')
const posts = allPosts.sort((a, b) => new Date(b.data.date) - new Date(a.data.date))
---
<DefaultPageLayout content={{ title, description }} showPageHeader={false}>
    <div class="hero">
        <div class="hero__content">
            <Prose>
                <AboutAstroInk/>
            </Prose>
        </div>
    </div>
    <PostPreviewList posts={posts.slice(0, 3)} heading="recent posts"/>
    <div class="page__actions">
        <a class="action__go-to-blog" href="/blog" title="All Posts">
            <span class="btn-text">&gt; VIEW ALL CONTENT</span>
            <span class="btn-arrow">â–¶</span>
        </a>
    </div>
</DefaultPageLayout>

<style>
    .hero {
        @apply relative py-8 mb-8;
    }
    .hero__content {
        @apply max-w-3xl mx-auto relative z-10 text-center mb-6;
    }
    
    .page__actions {
        @apply flex justify-center py-4;
    }
    .action__go-to-blog {
        @apply inline-flex items-center gap-3 px-6 py-3 bg-gradient-to-b from-orange-600 to-red-700 dark:from-emerald-600 dark:to-teal-700;
        @apply border-2 border-stone-900 dark:border-emerald-400 text-amber-50;
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        font-size: 0.875rem;
        font-weight: 600;
        box-shadow: 
            4px 4px 0 rgba(0, 0, 0, 0.5),
            inset 0 -2px 0 rgba(0, 0, 0, 0.3);
        text-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
        transition: all 0.1s;
    }
    .action__go-to-blog:hover {
        transform: translate(-2px, -2px);
        box-shadow: 
            6px 6px 0 rgba(0, 0, 0, 0.5),
            inset 0 -2px 0 rgba(0, 0, 0, 0.3);
    }
    .action__go-to-blog:active {
        transform: translate(2px, 2px);
        box-shadow: 
            2px 2px 0 rgba(0, 0, 0, 0.5),
            inset 0 -2px 0 rgba(0, 0, 0, 0.3);
    }
    .btn-arrow {
        @apply animate-pulse;
    }
    
    /* Style the prose content */
    :global(.hero .prose h1) {
        @apply text-2xl md:text-3xl font-bold text-stone-900 dark:text-emerald-400 mb-4 !important;
        font-family: system-ui, -apple-system, sans-serif !important;
        color: rgb(41 37 36) !important;
    }
    :global(.dark .hero .prose h1) {
        color: rgb(52 211 153) !important;
    }
    :global(.hero .prose p) {
        @apply text-lg md:text-xl text-stone-700 dark:text-emerald-300 leading-relaxed mb-0;
        font-family: system-ui, -apple-system, sans-serif;
    }
    :global(.hero .prose a) {
        @apply text-orange-600 dark:text-amber-400 font-bold;
        text-decoration: none;
        position: relative;
    }
    :global(.hero .prose a::after) {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background: currentColor;
        transform: scaleX(0);
        transition: transform 0.2s;
    }
    :global(.hero .prose a:hover::after) {
        transform: scaleX(1);
    }
</style>
